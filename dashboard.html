<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeWithMukhiteee - Student Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/dashboard.css">
</head>
<body>
    <button class="menu-toggle" id="menuToggle" aria-label="Toggle Menu">‚ò∞</button>

    <div class="dashboard">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="logo-section">
                <div class="logo">
                    <h1>CodeWithMukhiteee</h1>
                </div>
            </div>

            <!-- User Profile -->
            <div class="user-profile">
                <div class="user-avatar" id="userAvatar">SM</div>
                <div class="user-info">
                    <div class="user-name" id="userName">Student Member</div>
                    <div class="user-role">Premium Learner</div>
                </div>
            </div>

            <nav class="course-nav" id="courseNav">
                <!-- Modules will be generated by JavaScript -->
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="welcome-header">
                <h1 class="welcome-title">Welcome back, <span id="welcomeName">Student</span>! üöÄ</h1>
                <p class="welcome-subtitle">Track your learning journey and celebrate your achievements</p>
            </div>

            <!-- Analytics Panel -->
            <div class="analytics-panel">
                <div class="progress-section">
                    <div class="progress-header">
                        <h3 class="progress-label">Course Completion Progress</h3>
                        <span class="progress-percentage" id="overallProgress">0%</span>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="progressBar" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üìù</div>
                        <div class="stat-value" id="quizStat">0/0</div>
                        <div class="stat-label">Quizzes Completed</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üöÄ</div>
                        <div class="stat-value" id="projectStat">0/0</div>
                        <div class="stat-label">Projects Uploaded</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚≠ê</div>
                        <div class="stat-value" id="avgScore">0%</div>
                        <div class="stat-label">Average Score</div>
                    </div>
                </div>
            </div>

            <!-- Chart Section -->
            <div class="chart-section">
                <h3 class="chart-title">Module Performance Analytics</h3>
                <div class="chart-container">
                    <div class="bar-chart" id="barChart">
                        <!-- Bars will be generated by JavaScript -->
                    </div>
                    <div class="pie-chart-container">
                        <svg width="240" height="240" viewBox="0 0 240 240">
                            <circle class="pie-circle pie-segment" cx="120" cy="120" r="102"
                                stroke="#080" stroke-dasharray="0 640" id="pieSegment"/>
                            <circle class="pie-circle" cx="120" cy="120" r="102"
                                stroke="#e8e8e8" stroke-width="36" fill="none"/>
                        </svg>
                        <div class="pie-center">
                            <div class="pie-percentage" id="piePercentage">0%</div>
                            <div class="pie-label">Complete</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Course Data
        const courseModules = [
            {
                title: "Web Fundamentals",
                icon: "üåê",
                sections: ["Developer Environment Setup", "Version Control Introduction"]
            },
            {
                title: "HTML5 ‚Äì The Structure of the Web",
                icon: "üìÑ",
                sections: [
                    "Introduction to HTML",
                    "Foundation and Semantics",
                    "Media Embeds",
                    "Tables Data",
                    "Forms Interactivity",
                    "Advanced HTML"
                ]
            },
            {
                title: "CSS ‚Äì The Design of the Web",
                icon: "üé®",
                sections: [
                    "Introduction to CSS",
                    "CSS Fundamentals",
                    "Layout Mastery",
                    "Responsive Design",
                    "Visual Effects and Animations",
                    "Modern CSS Features",
                    "Advanced Techniques",
                    "Real-World Projects",
                    "Browser DevTools"
                ]
            },
            {
                title: "JavaScript Basics ‚Äì Logic and Interactivity",
                icon: "‚ö°",
                sections: [
                    "JS Fundamentals",
                    "Control Data Structures",
                    "Array Objects",
                    "The DOM Document Object Model",
                    "Local Storage and JSON",
                    "Debugging and Best Practices"
                ]
            },
            {
                title: "Integrating Skills",
                icon: "üîó",
                sections: ["Intermediate", "Advanced"]
            }
        ];

        // Analytics Data (simulating database)
        const analyticsData = {
            userName: "Alex Johnson",
            totalQuizzes: 45,
            completedQuizzes: 32,
            totalProjects: 12,
            uploadedProjects: 9,
            averageScore: 89.3,
            moduleProgress: [
                { name: 'Web Fundamentals', completion: 100 },
                { name: 'HTML5', completion: 92 },
                { name: 'CSS', completion: 75 },
                { name: 'JavaScript', completion: 58 },
                { name: 'Integration', completion: 33 }
            ]
        };

        // Generate Sidebar
        function generateSidebar() {
            const nav = document.getElementById('courseNav');
            courseModules.forEach((module, moduleIndex) => {
                const moduleDiv = document.createElement('div');
                moduleDiv.className = 'module';
               
                const header = document.createElement('div');
                header.className = 'module-header';
                header.innerHTML = `
                    <span class="module-icon">${module.icon}</span>
                    <span class="module-title">${module.title}</span>
                    <span class="chevron">‚ñ∂</span>
                `;
               
                const sections = document.createElement('div');
                sections.className = 'sections';
               
                module.sections.forEach((section, sectionIndex) => {
                    const sectionDiv = document.createElement('div');
                    sectionDiv.className = 'section-item';
                    sectionDiv.textContent = section;
                    sectionDiv.tabIndex = 0;
                    sectionDiv.setAttribute('role', 'button');
                    sectionDiv.setAttribute('aria-label', `Navigate to ${section}`);
                   
                    sectionDiv.addEventListener('click', () => selectSection(sectionDiv, section));
                    sectionDiv.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') selectSection(sectionDiv, section);
                    });
                   
                    sections.appendChild(sectionDiv);
                });
               
                header.addEventListener('click', () => toggleModule(header, sections));
                header.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') toggleModule(header, sections);
                });
                header.tabIndex = 0;
                header.setAttribute('role', 'button');
                header.setAttribute('aria-expanded', 'false');
               
                moduleDiv.appendChild(header);
                moduleDiv.appendChild(sections);
                nav.appendChild(moduleDiv);
            });
        }

        function toggleModule(header, sections) {
            const chevron = header.querySelector('.chevron');
            const isExpanded = sections.classList.contains('show');
           
            sections.classList.toggle('show');
            chevron.classList.toggle('expanded');
            header.setAttribute('aria-expanded', !isExpanded);
        }

        function selectSection(element, sectionName) {
            document.querySelectorAll('.section-item').forEach(item => {
                item.classList.remove('active');
            });
            element.classList.add('active');
            console.log(`Navigating to: ${sectionName}`);
           
            // Close mobile menu on selection
            if (window.innerWidth <= 968) {
                document.getElementById('sidebar').classList.remove('active');
            }
        }

        // Update User Info
        function updateUserInfo() {
            const name = analyticsData.userName;
            const initials = name.split(' ').map(n => n[0]).join('').toUpperCase();
           
            document.getElementById('userName').textContent = name;
            document.getElementById('welcomeName').textContent = name.split(' ')[0];
            document.getElementById('userAvatar').textContent = initials;
        }

        // Update Analytics with Animation
        function updateAnalytics() {
            const overallProgress = Math.round(
                (analyticsData.completedQuizzes / analyticsData.totalQuizzes) * 100
            );
           
            // Animate progress bar
            setTimeout(() => {
                document.getElementById('progressBar').style.width = overallProgress + '%';
                animateNumber('overallProgress', 0, overallProgress, 1500, '%');
            }, 200);
           
            // Animate stats
            setTimeout(() => {
                animateCounter('quizStat', analyticsData.completedQuizzes, analyticsData.totalQuizzes);
                animateCounter('projectStat', analyticsData.uploadedProjects, analyticsData.totalProjects);
                animateNumber('avgScore', 0, analyticsData.averageScore, 1500, '%');
            }, 400);
           
            // Update charts
            setTimeout(() => {
                updateBarChart();
                updatePieChart(overallProgress);
            }, 600);
        }

        function animateNumber(elementId, start, end, duration, suffix = '') {
            const element = document.getElementById(elementId);
            const range = end - start;
            const increment = range / (duration / 16);
            let current = start;
           
            const timer = setInterval(() => {
                current += increment;
                if (current >= end) {
                    current = end;
                    clearInterval(timer);
                }
                element.textContent = Math.round(current * 10) / 10 + suffix;
            }, 16);
        }

        function animateCounter(elementId, current, total) {
            const element = document.getElementById(elementId);
            let count = 0;
            const duration = 1500;
            const increment = current / (duration / 16);
           
            const timer = setInterval(() => {
                count += increment;
                if (count >= current) {
                    count = current;
                    clearInterval(timer);
                }
                element.textContent = `${Math.round(count)}/${total}`;
            }, 16);
        }

        function updateBarChart() {
            const barChart = document.getElementById('barChart');
            barChart.innerHTML = '';
           
            analyticsData.moduleProgress.forEach((module, index) => {
                const barItem = document.createElement('div');
                barItem.className = 'bar-item';
                barItem.innerHTML = `
                    <div class="bar-label">
                        <span>${module.name}</span>
                        <span class="bar-percentage">${module.completion}%</span>
                    </div>
                    <div class="bar-track">
                        <div class="bar-fill" style="width: 0%"></div>
                    </div>
                `;
                barChart.appendChild(barItem);
               
                // Animate bars with staggered delay
                setTimeout(() => {
                    barItem.querySelector('.bar-fill').style.width = module.completion + '%';
                }, 200 + (index * 150));
            });
        }

        function updatePieChart(percentage) {
            const circumference = 2 * Math.PI * 102;
            const offset = circumference - (percentage / 100) * circumference;
           
            setTimeout(() => {
                document.getElementById('pieSegment').style.strokeDasharray =
                    `${circumference} ${circumference}`;
                document.getElementById('pieSegment').style.strokeDashoffset = offset;
                animateNumber('piePercentage', 0, percentage, 1500, '%');
            }, 200);
        }

        // Mobile Menu Toggle
        document.getElementById('menuToggle').addEventListener('click', () => {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('active');
        });

        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', (e) => {
            const sidebar = document.getElementById('sidebar');
            const menuToggle = document.getElementById('menuToggle');
           
            if (window.innerWidth <= 968 &&
                sidebar.classList.contains('active') &&
                !sidebar.contains(e.target) &&
                !menuToggle.contains(e.target)) {
                sidebar.classList.remove('active');
            }
        });

        // Simulate data refresh (like database updates)
        function refreshData() {
            // Simulate fetching new data
            const mainContent = document.querySelector('.main-content');
            mainContent.classList.add('loading');
           
            setTimeout(() => {
                // Update with new data (simulated)
                analyticsData.completedQuizzes = Math.min(
                    analyticsData.completedQuizzes + Math.floor(Math.random() * 2),
                    analyticsData.totalQuizzes
                );
                analyticsData.uploadedProjects = Math.min(
                    analyticsData.uploadedProjects + Math.floor(Math.random() * 2),
                    analyticsData.totalProjects
                );
               
                updateAnalytics();
                mainContent.classList.remove('loading');
            }, 1000);
        }

        // Keyboard Navigation
        document.addEventListener('keydown', (e) => {
            // Press 'r' to refresh data
            if (e.key === 'r' && !e.ctrlKey && !e.metaKey) {
                const activeElement = document.activeElement;
                if (activeElement.tagName !== 'INPUT' && activeElement.tagName !== 'TEXTAREA') {
                    refreshData();
                }
            }
        });

        // Initialize Dashboard
        document.addEventListener('DOMContentLoaded', () => {
            generateSidebar();
            updateUserInfo();
            updateAnalytics();
           
            // Auto-refresh data every 30 seconds (simulating live updates)
            setInterval(() => {
                // Only auto-refresh if tab is visible
                if (!document.hidden) {
                    // Uncomment to enable auto-refresh
                    // refreshData();
                }
            }, 30000);
        });

        // Handle visibility change for performance
        document.addEventListener('visibilitychange', () => {
            if (!document.hidden) {
                // Refresh data when user returns to tab
                updateAnalytics();
            }
        });
    </script>
</body>
</html>